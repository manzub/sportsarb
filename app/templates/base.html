<!doctype html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="csrf-token" content="{{ csrf_token() }}">
  <meta name="site-url" content="{{config.SITE_URL}}">
  <link href="{{ url_for('static', filename='src/output.css') }}" rel="stylesheet">
  <script src="//unpkg.com/alpinejs" defer></script>
</head>

<body>
  <div class="bg-base-300">
    <!-- navbar -->
    <nav x-data="{ isOpen: false }" class="relative bg-primary shadow">
      <div class="container px-6 py-4 mx-auto md:flex md:justify-between md:items-center">
        <div class="flex items-center justify-between">
          <a href="{{url_for('main.index')}}">
            <img class="w-auto h-6 sm:h-7" src="https://merakiui.com/images/full-logo.svg" alt="">
          </a>

          <!-- Mobile menu button -->
          <div class="flex md:hidden">
            <button x-cloak @click="isOpen = !isOpen" type="button"
              class="text-primary-content hover:text-gray-600 dark:hover:text-gray-400 focus:outline-none focus:text-gray-600 dark:focus:text-gray-400"
              aria-label="toggle menu">
              <ion-icon x-show="!isOpen" name="menu" class="w-6 h-6"></ion-icon>
              <ion-icon x-show="isOpen" name="close" class="w-6 h-6"></ion-icon>
            </button>
          </div>
        </div>

        <!-- Mobile Menu open: "block", Menu closed: "hidden" -->
        <div x-cloak :class="[isOpen ? 'translate-x-0 opacity-100 ' : 'opacity-0 -translate-x-full']"
          class="flex-2 justify-between absolute inset-x-0 z-20 w-full px-6 py-4 transition-all duration-300 ease-in-out bg-primary md:mt-0 md:p-0 md:top-0 md:relative md:bg-transparent md:w-auto md:opacity-100 md:translate-x-0 md:flex md:items-center">
          <span class="no"></span>
          <div class="flex flex-col md:flex-row md:mx-6">
            <a class="my-2 {%if request.endpoint == 'main.index' %} text-primary-content font-bold uppercase {%else%} text-gray-400 {%endif%} transition-colors duration-300 transform hover:text-blue-500 md:mx-4 md:my-0" href="{{url_for('main.index')}}">Surebets</a>
            <a class="my-2 {%if request.endpoint == 'main.middlebets' %} text-primary-content font-bold uppercase {%else%} text-gray-400 {%endif%} transition-colors duration-300 transform hover:text-blue-500 md:mx-4 md:my-0" {% if session['has_active_plan'] %} href="{{url_for('main.middles')}}" {%endif%}>Middlebets</a>
            <a class="my-2 {%if request.endpoint == 'main.valuebets' %} text-primary-content font-bold uppercase {%else%} text-gray-400 {%endif%} transition-colors duration-300 transform hover:text-blue-500 md:mx-4 md:my-0" {% if session['has_active_plan'] %} href="{{url_for('main.valuebets')}}" {%endif%}>Valuebets</a>
          </div>
          <div class="flex justify-center sm:block">
            <a href="{{url_for('main.account')}}" class="btn btn-ghost"><ion-icon class="w-7 h-7 text-success" name="person-circle"></ion-icon></a>
            <a href="{{url_for('main.signin')}}" class="btn btn-link hover:text-error text-primary-content">Sign In <ion-icon name="arrow-forward"></ion-icon></a>
          </div>
        </div>
      </div>
    </nav>
    <!-- navbar end -->

    <div class="sm:grid sm:grid-cols-4 gap-2 p-2">
      <div class="col-span-3">
        <div class="card bg-base-100 shadow-sm border-1 border-gray-300">
          <div class="p-4">
            {% with messages = get_flashed_messages(with_categories=true)%}
            {% if messages %}
            {% for category, message in messages %}
            <div class="w-full text-white bg-{{category if category != 'message' else 'red'}}-400">
              <div class="container flex items-center justify-between px-6 py-4 mx-auto">
                <div class="flex">
                  <ion-icon name="alert-circle" class="w-6 h-6 fill-current"></ion-icon>
                  {% if message == 'pending' %}
                  <p>You have a pending subscription, <a class="underline"
                      href="{{url_for('main.checkout', plan_id=pending_plan_id)}}">Click here to
                      pay</a></p>
                  {% else%}
                  <p class="mx-3">{{message}}</p>
                  {% endif %}
                </div>

                {% if message == 'pending' %}
                <a href="{{url_for('main.checkout', plan_id=pending_plan_id)}}"
                  class="btn dark:bg-gray-900 bg-yellow-100 btn-sm">
                  <ion-icon name="arrow-forward"></ion-icon>
                </a>
                {%else%}
                <button class="p-1 transition-colors duration-300 transform rounded-md hover:bg-opacity-25 hover:bg-gray-600
                  focus:outline-none">
                  <ion-icon name="arrow-close"></ion-icon>
                </button>
                {% endif %}
              </div>
            </div>
            {% endfor %}
            {% endif %}
            {% endwith %}

            <!-- content -->
            {% block content %}
            {% endblock content %}
          </div>
        </div>
      </div>
      <!-- dynamic sidebar -->
      <div class="">
        {% block sidebar %}
        {% include 'partials/sidebar.html' %}
        {% endblock sidebar %}
      </div>
    </div>
  </div>
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</body>

</html>