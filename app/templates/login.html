{% extends 'base.html' %}

{% block content %}
<section class="w-full min-h-screen bg-gray-950 text-gray-200 flex flex-col lg:flex-row">

  <!-- MAIN LOGIN -->
  <div class="w-full lg:w-3/4 flex items-center justify-center order-1 lg:order-1 px-6 py-12">
    <div class="w-full max-w-md">

      <h1 class="text-4xl font-bold text-bet365yellow mb-10 text-center lg:text-left">
        Sign In / Create Account
      </h1>

      <form id="sign-in-form" method="post" novalidate
        class="w-full bg-gray-900 border border-gray-700 rounded-xl p-10 shadow-lg">

        {{ form.hidden_tag() }}

        <!-- Email -->
        <div class="mb-6">
          <label class="block mb-2 font-medium text-gray-300">Email Address</label>
          <div class="relative">
            <ion-icon name="mail-outline"
              class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-xl"></ion-icon>

            {{ form.email(
            maxlength="128",
            placeholder="you@example.com",
            type="email",
            class="w-full bg-gray-800 border border-gray-700 rounded-lg pl-12 pr-4 py-3 text-gray-100
            focus:outline-none focus:ring-2 focus:ring-bet365green"
            ) }}
          </div>
        </div>

        <!-- Password -->
        <div class="mb-6">
          <label class="block mb-2 font-medium text-gray-300">Password</label>
          <div class="relative">
            <ion-icon name="lock-closed-outline"
              class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-xl"></ion-icon>

            {{ form.password(
            placeholder="Your password",
            id="password",
            class="w-full bg-gray-800 border border-gray-700 rounded-lg pl-12 pr-12 py-3 text-gray-100
            focus:outline-none focus:ring-2 focus:ring-bet365green"
            ) }}

            <button type="button" id="togglePassword"
              class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300">
              <ion-icon name="eye-off-outline" class="text-xl"></ion-icon>
            </button>
          </div>
        </div>

        <!-- Toggles -->
        <div class="flex items-center justify-between mb-8">
          <label class="flex items-center gap-2 cursor-pointer text-gray-300">
            {{ form.remember_me(class="checkbox checkbox-success") }}
            <span>Remember Me</span>
          </label>

          <label class="flex items-center gap-2 cursor-pointer text-gray-300">
            {{ form.create_account(class="toggle toggle-success") }}
            <span>Create New Account</span>
          </label>
        </div>

        <button type="submit"
          class="w-full py-3 rounded-lg bg-bet365green text-gray-900 font-semibold text-lg hover:bg-bet365green/80 transition">
          Continue
        </button>

        <p class="text-center text-gray-400 mt-6 mb-2 font-semibold">OR</p>

        <a href="{{ url_for('auth.google_login') }}"
          class="w-full flex justify-center items-center gap-3 py-3 border border-gray-700 rounded-lg bg-gray-800 hover:bg-gray-700 transition text-gray-200">
          <svg class="w-6 h-6" viewBox="0 0 40 40"> ... </svg>
          <span>Sign in with Google</span>
        </a>

      </form>

    </div>
  </div>

  <!-- SIDEBAR -->
  <aside class="w-full lg:w-1/4 bg-gray-900 border-t lg:border-t-0 lg:border-l border-gray-800 
           flex flex-col items-center justify-start py-12 px-5 order-2">

    <h2 class="text-2xl font-semibold text-bet365yellow mb-8">
      Account Options
    </h2>

    <nav class="w-full space-y-3 text-gray-300">
      <a href="{{ url_for('main.account') }}" class="flex items-center gap-3 px-4 py-3 rounded-lg
        {% if request.endpoint == 'auth.login' %}
           bg-bet365green text-gray-900
        {% else %}
           hover:bg-gray-800
        {% endif %}">
        <ion-icon name="person" class="text-xl"></ion-icon>
        <span class="font-medium">Sign In</span>
      </a>

      <a class="flex items-center gap-3 px-4 py-3 rounded-lg
        {% if request.endpoint == 'auth.confirmation' %}
           bg-bet365green text-gray-900
        {% else %}
           hover:bg-gray-800
        {% endif %}">
        <ion-icon name="shield-checkmark" class="text-xl"></ion-icon>
        <span class="font-medium">Confirmation</span>
      </a>

      <a href="{{ url_for('auth.request_password_reset') }}" class="flex items-center gap-3 px-4 py-3 rounded-lg
        {% if request.endpoint == 'auth.reset_password' %}
           bg-bet365green text-gray-900
        {% else %}
           hover:bg-gray-800
        {% endif %}">
        <ion-icon name="refresh-circle" class="text-xl"></ion-icon>
        <span class="font-medium">Reset Password</span>
      </a>
    </nav>

  </aside>

</section>


<script>
  const toggleBtn = document.getElementById("togglePassword");
  const passInput = document.getElementById("password");
  const icon = toggleBtn.querySelector("ion-icon");

  toggleBtn.addEventListener("click", () => {
    const isHidden = passInput.type === "password";
    passInput.type = isHidden ? "text" : "password";
    icon.name = isHidden ? "eye-outline" : "eye-off-outline";
  });
</script>

{% endblock content %}